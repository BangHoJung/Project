<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="team.mapper.AdMapper">
	<select id="selectAdList" parameterType="int" resultType="team.dto.AdDTO">
		select * from 
		(select ceil(rownum / 10) as pagenum, ADVERTISEMENT_NO, ADVERTISEMENT_STORE_ID
		from advertisement order by ADVERTISEMENT_NO desc) 
		where pagenum = #{page}
	</select>
	<select id="selectCount" resultType="int">
		select count(*) from advertisement
	</select>
	<update id="addCount" parameterType="int">
		update advertisement set ADVERTISEMENT_NO = ADVERTISEMENT_NO+1 where ad_no = #{ad_no}
	</update>
	<select id="selectAd" parameterType="int" resultType="team.dto.AdDTO">
		select * from advertisement where ADVERTISEMENT_NO = #{ad_no}
	</select>
	<select id="newAd_no" resultType="int">		<!-- 광고페이지 시퀀스 생성 필요! -->
		select advertisement_no_seq.nextval from dual
	</select>
	<insert id="insertAd" parameterType="team.dto.AdDTO">
		insert into advertisement(ADVERTISEMENT_NO,ad_store_id,advertisement_status,advertisement_content) values(#{ad_no},#{ad_store_id},#{ad_status},#{ad_comment})
	</insert>
</mapper>